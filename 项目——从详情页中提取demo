package lab;

import com.gargoylesoftware.htmlunit.BrowserVersion;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.DomText;
import com.gargoylesoftware.htmlunit.html.HtmlElement;
import com.gargoylesoftware.htmlunit.html.HtmlPage;

import java.io.IOException;
import java.util.List;

public class 详情中提取Demo {
    public static void main(String[] args) throws IOException {
        WebClient webClient = new WebClient(BrowserVersion.CHROME);//指定浏览器的版本
        webClient.getOptions().setJavaScriptEnabled(false); // 关闭了浏览器的 js 执行引擎，不再执行网页中的 js 脚本
        webClient.getOptions().setCssEnabled(false);// 关闭了浏览器的 css 执行引擎，不再执行网页中的 css 布局
        HtmlPage page = webClient.getPage("https://so.gushiwen.org/shiwenv_45c396367f59.aspx");//访问具体的网站 返回页面
        HtmlElement body = page.getBody();
        List<HtmlElement> elements = body.getElementsByAttribute(
                "div",
                "class",
                "contson"
        );//只需要获取第一首 否则将那个页面中所有的诗都进行打印
        System.out.println( elements.get(0).getTextContent().trim());
        // 标题
        {
            String xpath = "//div[@class='cont']/h1/text()";
            Object o = body.getByXPath(xpath).get(0);DomText domText = (DomText)o;
            System.out.println(domText.asText());
        }
        //朝代
        {
            String xpath = "//div[@class='cont']/p[@class='source']/a[1]/text()";
            Object o = body.getByXPath(xpath).get(0);DomText domText = (DomText)o;
            System.out.println(domText.asText());
        }
        //作者
        {
            String xpath = "//div[@class='cont']/p[@class='source']/a[2]/text()";
            Object o = body.getByXPath(xpath).get(0);DomText domText = (DomText)o;
            System.out.println(domText.asText());
        }
        //正文
        {
            String xpath = "//div[@class='cont']/div[@class='contson']";
            Object o = body.getByXPath(xpath).get(0);
            HtmlElement element = (HtmlElement)o;
            System.out.println(element.getTextContent().trim());
        }
    }
}

